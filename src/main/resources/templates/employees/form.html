<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<body>
    <div th:fragment="content">
        <!-- Alert Messages -->
        <div th:if="${success}" class="mb-4 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded">
            <span th:text="${success}"></span>
        </div>

        <div th:if="${error}" class="mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded">
            <span th:text="${error}"></span>
        </div>

        <!-- Header -->
        <div class="mb-6">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-2xl font-bold text-gray-900" th:text="${isEdit} ? 'Edit Employee' : 'Add New Employee'">Add Employee</h1>
                    <p class="text-gray-600 mt-1">Fill in the employee information below</p>
                </div>
                <a th:href="@{/employees}" class="bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg font-medium transition duration-200">
                    <i class="fas fa-arrow-left mr-2"></i>Back to List
                </a>
            </div>
        </div>

        <!-- Employee Form -->
        <div class="bg-white rounded-lg card-shadow p-6">
            <form th:action="${isEdit} ? @{/employees/{id}/edit(id=${employee.id})} : @{/employees/add}" th:object="${employee}" method="post" class="space-y-6">

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Full Name -->
                    <div>
                        <label for="fullName" class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-user mr-2"></i>Full Name *
                        </label>
                        <input type="text" id="fullName" th:field="*{fullName}" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" th:classappend="${#fields.hasErrors('fullName')} ? 'border-red-500' : ''" placeholder="Enter full name">
                        <div th:if="${#fields.hasErrors('fullName')}" class="mt-1 text-sm text-red-600">
                            <span th:errors="*{fullName}"></span>
                        </div>
                    </div>

                    <!-- Employee ID -->
                    <div>
                        <label for="employeeId" class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-id-badge mr-2"></i>Employee ID *
                        </label>
                        <input type="text" id="employeeId" th:field="*{employeeId}" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" th:classappend="${#fields.hasErrors('employeeId')} ? 'border-red-500' : ''" placeholder="e.g., EMP001">
                        <div th:if="${#fields.hasErrors('employeeId')}" class="mt-1 text-sm text-red-600">
                            <span th:errors="*{employeeId}"></span>
                        </div>
                    </div>

                    <!-- Email -->
                    <div>
                        <label for="email" class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-envelope mr-2"></i>Email Address *
                        </label>
                        <input type="email" id="email" th:field="*{email}" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" th:classappend="${#fields.hasErrors('email')} ? 'border-red-500' : ''" placeholder="employee@company.com">
                        <div th:if="${#fields.hasErrors('email')}" class="mt-1 text-sm text-red-600">
                            <span th:errors="*{email}"></span>
                        </div>
                    </div>

                    <!-- Phone -->
                    <div>
                        <label for="phone" class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-phone mr-2"></i>Phone Number
                        </label>
                        <input type="tel" id="phone" th:field="*{phone}" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" th:classappend="${#fields.hasErrors('phone')} ? 'border-red-500' : ''" placeholder="1234567890">
                        <div th:if="${#fields.hasErrors('phone')}" class="mt-1 text-sm text-red-600">
                            <span th:errors="*{phone}"></span>
                        </div>
                    </div>

                    <!-- Department -->
                    <div>
                        <label for="department" class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-building mr-2"></i>Department *
                        </label>
                        <input type="text" id="department" th:field="*{department}" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" th:classappend="${#fields.hasErrors('department')} ? 'border-red-500' : ''" placeholder="e.g., IT, HR, Marketing"
                            list="departmentList">
                        <datalist id="departmentList">
                            <option th:each="dept : ${departments}" th:value="${dept}">
                        </datalist>
                        <div th:if="${#fields.hasErrors('department')}" class="mt-1 text-sm text-red-600">
                            <span th:errors="*{department}"></span>
                        </div>
                    </div>

                    <!-- Position -->
                    <div>
                        <label for="position" class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-briefcase mr-2"></i>Position *
                        </label>
                        <input type="text" id="position" th:field="*{position}" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" th:classappend="${#fields.hasErrors('position')} ? 'border-red-500' : ''" placeholder="e.g., Senior Developer, Manager"
                            list="positionList">
                        <datalist id="positionList">
                            <option th:each="pos : ${positions}" th:value="${pos}">
                        </datalist>
                        <div th:if="${#fields.hasErrors('position')}" class="mt-1 text-sm text-red-600">
                            <span th:errors="*{position}"></span>
                        </div>
                    </div>

                    <!-- Salary -->
                    <div>
                        <label for="salary" class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-dollar-sign mr-2"></i>Salary *
                        </label>
                        <input type="number" id="salary" th:field="*{salary}" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" th:classappend="${#fields.hasErrors('salary')} ? 'border-red-500' : ''" placeholder="50000"
                            min="0" step="0.01">
                        <div th:if="${#fields.hasErrors('salary')}" class="mt-1 text-sm text-red-600">
                            <span th:errors="*{salary}"></span>
                        </div>
                    </div>

                    <!-- Date of Joining -->
                    <div>
                        <label for="dateOfJoining" class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-calendar mr-2"></i>Date of Joining *
                        </label>
                        <input type="date" id="dateOfJoining" th:field="*{dateOfJoining}" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" th:classappend="${#fields.hasErrors('dateOfJoining')} ? 'border-red-500' : ''">
                        <div th:if="${#fields.hasErrors('dateOfJoining')}" class="mt-1 text-sm text-red-600">
                            <span th:errors="*{dateOfJoining}"></span>
                        </div>
                    </div>
                </div>

                <!-- Address -->
                <div>
                    <label for="address" class="block text-sm font-medium text-gray-700 mb-2">
                        <i class="fas fa-map-marker-alt mr-2"></i>Address
                    </label>
                    <textarea id="address" th:field="*{address}" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Enter full address"></textarea>
                </div>

                <!-- Status (for edit mode) -->
                <div th:if="${isEdit}">
                    <label for="status" class="block text-sm font-medium text-gray-700 mb-2">
                        <i class="fas fa-toggle-on mr-2"></i>Status
                    </label>
                    <select id="status" th:field="*{status}" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option th:each="status : ${T(com.employeemanagementsystem.v1.entity.Employee.EmployeeStatus).values()}"
                                th:value="${status}"
                                th:text="${status}">Status</option>
                    </select>
                </div>

                <!-- Form Actions -->
                <div class="flex justify-end space-x-4 pt-6 border-t border-gray-200">
                    <a th:href="@{/employees}" class="px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition duration-200">
                        Cancel
                    </a>
                    <button type="submit" class="px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition duration-200">
                        <i class="fas fa-save mr-2"></i>
                        <span th:text="${isEdit} ? 'Update Employee' : 'Add Employee'">Save Employee</span>
                    </button>
                </div>
            </form>
        </div>
    </div>
</body>

</html>